<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人注册</title>
    <link rel="stylesheet" href="/stylesheets/register.css">
    <link rel="stylesheet" href="/stylesheets/reset.css">
</head>

<body>
    <div class="register-outer">
        <div class="header">
            <a href="/">
                <img src="images/login/logo.jpg" alt="logo">
            </a>
            <div class="text">
                <span>欢迎注册</span>
            </div>
            <div class="have-account">已有账号？<a href="login">请登录</a>
            </div>
        </div>
    </div>
    <div class="register-content">
        <div class="register-process">
            <div class="step1">1.填写账号信息</div>
            <div class="step2">2.注册成功</div>
        </div>
        <div class="account-register">
                <input id="username" placeholder="  邮箱/用户名/登录手机"/>
                <input type="password" id="password" placeholder="  密码">
                <input type="number" id="age" placeholder="  年龄">
                <button id="register">注册</button>
            <div class="other-register">
                <a href="javascript:;" class="item-person">企业用户注册</a>
                <a href="javascript:;" class="outer-person">海外用户注册</a>
            </div>
        </div>
        <hr>
        <div>
        <button id="update">更新</button>
        <button id="delete">删除</button>
        </div>
        <table border="1">
            <thead>
            <tr>
                <td>id</td>
                <td>用户名</td>
                <td>年龄</td>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
    <div class="footer">
        <div class="other">
            <a href="javascript:;">关于我们 |</a>
            <a href="javascript:;">联系我们 |</a>
            <a href="javascript:;">人才招聘 |</a>
            <a href="javascript:;">商家入驻 |</a>
            <a href="javascript:;">广告服务 |</a>
            <a href="javascript:;">手机京东 |</a>
            <a href="javascript:;">友情链接 |</a>
            <a href="javascript:;">销售联盟 |</a>
            <a href="javascript:;">京东社区 |</a>
            <a href="javascript:;">京东公益 |</a>
            <a href="javascript:;">English Site</a>
        </div>
        <div class="versions">
            <p class="copyright">Copyright © 2004-2020 京东JD.com 版权所有</p>
        </div>
    </div>
    <script>
        var register=document.querySelector("#register")
        var update=document.querySelector("#update")
        var deletebutton=document.querySelector("#delete")
  
        var username=document.querySelector("#username")
        var password=document.querySelector("#password")
        var age=document.querySelector("#age")
  
        register.onclick=()=>{
          fetch("/register/user/add",{
            method:'POST',
            body:JSON.stringify({
              username:username.value,
              password:password.value,
              age:age.value
            }),
            headers:{
              "Content-Type":"application/json"
            }
          }).then(res=>res.json()).then(res=>{
            console.log(res);
          })
      }
          update.onclick=()=>{
          fetch("/register/user/update/62f8fb507a7c1ea8ef2c612e",{
            method:'POST',
            body:JSON.stringify({
              username:"修改的名字",
              password:"修改的密码",
              age:1
            }),
            headers:{
              "Content-Type":"application/json"
            }
          }).then(res=>res.json()).then(res=>{
            console.log(res);
          })
        }
  
        deletebutton.onclick=()=>{
          fetch("/register/user/delete/62f8f89bf6960ee2eb605087").then(res=>res.json()).then(res=>{
            console.log(res);
          })
        }
  
        //获取列表
        fetch("/register/user/list").then(res=>res.json()).then(res=>{
          console.log(res);
          var tbody=document.querySelector("tbody")
          tbody.innerHTML=res.map(item=>`
          <tr>
            <td>${item._id}</td>
            <td>${item.username}</td>
            <td>${item.age}</td>
          </tr>
          `).join("")
        })
      </script>
</body>

</html>